<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="index.css">
  <script type="module" src="index.ts"></script>
</head>

<body class="warm-bg">

  <img src="resources/sprites/ignorant.png" class="hide" id="ignorantSprite">
  <img src="resources/sprites/pirate.png" class="hide" id="goodGuySprite">
  <img src="resources/sprites/p3.jpg" class="hide" id="groundSprite">
  <img src="resources/sprites/waypoint.png" class="hide" id="waypointSprite">
    <img src="resources/sprites/undefined.png" class="hide" id="undefinedSprite">
  <header>
    <h1>Pastafarist</h1>
  </header>
  <div class="main-content">
    <div class="thermometer">
      <div class="thermometer-body">
        <div class="thermometer-body-fill"></div>
      </div>
      <div class="thermometer-base">
        <div class="thermometer-base-fill"></div>
      </div>
    </div>
    <div class="grid">
      <canvas id="myCanvas"></canvas>
    </div>
    <div class="menu">
      <h1>Menu</h1>
      <div class="controls">
        <button id="very-hot" class="btn very-hot" aria-label="Set temperature to very hot">
          <i class="fa-solid fa-fire-flame-curved fa-xl"></i>
        </button>
        <button id="hot" class="btn hot" aria-label="Set temperature to hot">
          <i class="fa-solid fa-sun fa-xl"></i>
        </button>
        <button id="warm" class="btn warm" aria-label="Set temperature to warm">
          <i class="fa-solid fa-cloud fa-xl"></i>
        </button>
        <button id="cold" class="btn cold" aria-label="Set temperature to cold">
          <i class="fa-solid fa-snowflake fa-xl"></i>
        </button>
        <button id="very-cold" class="btn very-cold" aria-label="Set temperature to very cold">
          <i class="fa-solid fa-icicles fa-xl"></i>
        </button>
      </div>
    </div>
  </div>
</body>

<script>
  const FILL_HEIGHT = [
    "very-hot",
    "hot",
    "warm",
    "cold",
    "very-cold"
  ];

  let tempFill = document.querySelector(".thermometer-body-fill");
  let controls = document.querySelector(".controls");
  let i;
  let intervalHandler;

  controls.addEventListener("click", (event) => {
    if (event.target.nodeName === "BUTTON") {
      i = 300;
      intervalHandler = window.setInterval(fill, 30);
    }
  });

  
  function fill() {
    if (i <= 10)
      clearInterval(intervalHandler)
    tempFill.style.setProperty("top", `${i}px`);
    bg(i);
    i--;
  }

  function bg(x) {
    document.body.className = `${FILL_HEIGHT[Math.trunc(x/58)]}-bg`;
  }

</script>

</html>