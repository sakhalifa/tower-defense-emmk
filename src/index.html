<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="index.css">
  <script type="module" src="index.ts"></script>

  <audio id="myAudio" loop>
    <source src="resources/Chinese Rap Full.mp3" type="audio/mpeg">
    Votre navigateur ne supporte pas l'audio HTML5.
  </audio>
</head>

<body class="very-cold-bg">

  <img src="resources/sprites/ignorant.png" class="hide" id="ignorantSprite">
  <img src="resources/sprites/pirate.png" class="hide" id="goodGuySprite">
  <img src="resources/sprites/FlyingSpaghettiMonster.png" class="hide" id="spaghettiMonsterSprite">
  <img src="resources/sprites/pope.png" class="hide" id="ignoranceSpreaderSprite">
  <img src="resources/sprites/ground.png" class="hide" id="groundSprite">
  <img src="resources/sprites/spawner.png" class="hide" id="spawnerSprite">
  <img src="resources/sprites/waypoint.png" class="hide" id="waypointSprite">
  <img src="resources/sprites/grass.png" class="hide" id="grassSprite">
  <div class="main-content">
    <div class="thermometer">
      <h1 class="title">Pastafarist</h1>
      <div class="thermometer-body">
        <div class="thermometer-body-fill"></div>
      </div>
      <div class="thermometer-base">
        <div class="thermometer-base-fill"></div>
      </div>
    </div>
    <div id="display-grid"></div>
    <div class="menu">
      <h1>Menu</h1>
      <div class="controls">
        <button id="very-hot" class="btn very-hot" aria-label="Set temperature to very hot" onclick="playMusic()">
          <i class="fa-solid fa-fire-flame-curved fa-xl"></i>
        </button>
      </div>
    </div>
  </div>
  <dialog id="lol">COucou</dialog>
</body>

<script>
  const FILL_HEIGHT = [
    "very-hot",
    "hot",
    "warm",
    "cold",
    "very-cold"
  ];

  function setTemperature(hp, hp_max) {
    if (hp < 0) {
      hp = 0;
    }

    i = (289 * hp) / hp_max;
    let tempFill = document.querySelector(".thermometer-body-fill");
    tempFill.style.setProperty("top", `${i+11}px`);
    document.body.className = `${FILL_HEIGHT[Math.trunc(i / 58)]}-bg`;

  }

  document.getElementById("very-hot").addEventListener("click", () =>{
    document.getElementById("lol").showModal();
  })

</script>


<script>
  var audio = document.getElementById("myAudio");

  function playMusic() {
    audio.play();
  }
</script>

</html>