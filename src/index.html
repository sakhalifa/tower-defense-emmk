<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="index.css">
  <script type="module" src="index.ts"></script>

  <audio id="myAudio" loop>
    <source src="resources/Chinese Rap Full.mp3" type="audio/mpeg">
    Votre navigateur ne supporte pas l'audio HTML5.
  </audio>  
</head>

<body class="warm-bg">

  <img src="resources/sprites/ignorant.png" class="hide" id="ignorantSprite">
  <img src="resources/sprites/pirate.png" class="hide" id="goodGuySprite">
  <img src="resources/sprites/FlyingSpaghettiMonster.png" class="hide" id="spaghettiMonsterSprite">
  <img src="resources/sprites/pope.png" class="hide" id="ignoranceSpreaderSprite">
  <img src="resources/sprites/ground.png" class="hide" id="groundSprite">
  <img src="resources/sprites/spawner.png" class="hide" id="spawnerSprite">
  <img src="resources/sprites/waypoint.png" class="hide" id="waypointSprite">
  <img src="resources/sprites/undefined.png" class="hide" id="undefinedSprite">
  <header>
    <h1>Pastafarist</h1>
  </header>
  <div class="main-content">
    <div class="thermometer">
      <div class="thermometer-body">
        <div class="thermometer-body-fill"></div>
      </div>
      <div class="thermometer-base">
        <div class="thermometer-base-fill"></div>
      </div>
    </div>
    <div id="display-grid"></div>
    <div class="menu">
      <h1>Menu</h1>
      <div class="controls">
        <button id="very-hot" class="btn very-hot" aria-label="Set temperature to very hot" onclick="playMusic()">
          <i class="fa-solid fa-fire-flame-curved fa-xl"></i>
        </button>
      </div>
    </div>
  </div>
</body>

<script>
  const FILL_HEIGHT = [
    "very-hot",
    "hot",
    "warm",
    "cold",
    "very-cold"
  ];

  let tempFill = document.querySelector(".thermometer-body-fill");
  let controls = document.querySelector(".controls");
  let i;
  let intervalHandler;

  controls.addEventListener("click", (event) => {
    if (event.target.nodeName === "BUTTON") {
      i = 300;
      intervalHandler = window.setInterval(fill, 30);
    }
  });

  
  function fill() {
    if (i <= 10)
      clearInterval(intervalHandler)
    tempFill.style.setProperty("top", `${i}px`);
    document.body.className = `${FILL_HEIGHT[Math.trunc(i/58)]}-bg`;
    i--;
  }

</script>


<script>
  var audio = document.getElementById("myAudio");

  function playMusic() {
    audio.play();
  }
</script>

</html>
